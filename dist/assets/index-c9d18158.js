var L=Object.defineProperty;var v=(i,e,t)=>e in i?L(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var s=(i,e,t)=>(v(i,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function t(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(r){if(r.ep)return;r.ep=!0;const n=t(r);fetch(r.href,n)}})();let j;const $=new Uint8Array(16);function M(){if(!j&&(j=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!j))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return j($)}const d=[];for(let i=0;i<256;++i)d.push((i+256).toString(16).slice(1));function B(i,e=0){return d[i[e+0]]+d[i[e+1]]+d[i[e+2]]+d[i[e+3]]+"-"+d[i[e+4]]+d[i[e+5]]+"-"+d[i[e+6]]+d[i[e+7]]+"-"+d[i[e+8]]+d[i[e+9]]+"-"+d[i[e+10]]+d[i[e+11]]+d[i[e+12]]+d[i[e+13]]+d[i[e+14]]+d[i[e+15]]}const S=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),p={randomUUID:S};function _(i,e,t){if(p.randomUUID&&!e&&!i)return p.randomUUID();i=i||{};const o=i.random||(i.rng||M)();if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,e){t=t||0;for(let r=0;r<16;++r)e[t+r]=o[r];return e}return B(o)}class y{constructor({id:e,title:t,description:o,info:r}){s(this,"id");s(this,"title");s(this,"description");s(this,"info");this.id=e,this.title=t,this.description=o,this.info=r}}class a{static logError(e){console.error(`Error: ${e}`)}static logInfo(e){console.info(`Info: ${e}`)}}class b{constructor({status:e}){s(this,"$projectsList");s(this,"initProjectListElement",e=>{switch(e){case"active":const t=document.getElementById("active-projects");return t==null?void 0:t.querySelector(".projects-list__content");case"finished":const r=document.getElementById("finished-projects");return r==null?void 0:r.querySelector(".projects-list__content");default:return null}});s(this,"renderProject",e=>{try{if(!this.$projectsList)throw new Error("Project list element not provided.");if(!e)throw new Error("Project element not provided.");this.$projectsList.append(e),this.$projectsList.scrollTo(0,this.$projectsList.scrollHeight)}catch(t){t instanceof Error&&a.logError(t.message)}});s(this,"renderProjectList",e=>{try{if(!this.$projectsList)throw new Error("Project list element not provided.");for(const t of e)this.renderProject(t);this.$projectsList.scrollTo(0,0)}catch(t){t instanceof Error&&a.logError(t.message)}});s(this,"unrenderProjectById",e=>{var t;try{((t=this.$projectsList)==null?void 0:t.querySelector(`[data-id="${e}"]`)).remove()}catch(o){o instanceof Error&&a.logError(o.message)}});this.$projectsList=this.initProjectListElement(e)}}class k{constructor({status:e}){s(this,"status");s(this,"createProjectElement",e=>{const t=this.status==="active"?"Finish":"Activate",o=this.createLi("js-project",e.id),r=this.createH2("js-project__title",void 0,e.title),n=this.createP("js-project__description",void 0,e.description),l=this.createDiv("js-project__buttons-container",void 0,void 0),h=this.createButton(["js-project__more-info-button","outlined-red-button"],void 0,"More Info",void 0),m=this.createButton(["js-project__action-button","filled-red-button"],void 0,t,void 0);return l.append(h,m),o.append(r,n,l),o});s(this,"createProjectsElementsArray",e=>{if(e.length){let t=[];for(const o of e){const r=this.createProjectElement(o);t.push(r)}return t}return null});s(this,"createH2",(e,t,o)=>{const r=document.createElement("h2");return e&&this.addToClassNameList(e,r),t&&(r.id=t),o&&(r.innerText=o),r});s(this,"createP",(e,t,o)=>{const r=document.createElement("p");return e&&this.addToClassNameList(e,r),t&&(r.id=t),o&&(r.innerText=o),r});s(this,"createDiv",(e,t,o)=>{const r=document.createElement("div");return e&&this.addToClassNameList(e,r),t&&(r.id=t),o&&(r.innerText=o),r});s(this,"createButton",(e,t,o,r)=>{const n=document.createElement("button");return e&&this.addToClassNameList(e,n),t&&(n.id=t),r&&o?n.innerHTML=`${o} ${r}`:(o&&(n.innerHTML=o),r&&(n.innerHTML=r)),n});s(this,"addToClassNameList",(e,t)=>{if(typeof e=="string"&&t.classList.add(e),Array.isArray(e))for(const o of e)t.classList.add(o)});this.status=e}createLi(e,t){const o=document.createElement("li");return e&&this.addToClassNameList(e,o),t&&o.setAttribute("data-id",t),o}}class A{constructor({key:e}){s(this,"key");this.key=e}set(e){try{localStorage.setItem(this.key,JSON.stringify(e))}catch(t){t instanceof Error&&a.logError(t.message)}}get(){try{const e=localStorage.getItem(this.key);return e?JSON.parse(e):null}catch(e){return e instanceof Error&&a.logError(e.message),null}}add(e){try{const t=localStorage.getItem(this.key),o=t?JSON.parse(t):null;if(o)if(Array.isArray(o))o.push(e),localStorage.setItem(this.key,JSON.stringify(o));else throw new Error("Data format is not array. An error could occure while trying to stringify data.");else localStorage.setItem(this.key,JSON.stringify([e]))}catch(t){t instanceof Error&&a.logError(t.message)}}}class P{constructor({status:e,key:t}){s(this,"status");s(this,"projectsInstancesArray");s(this,"localStorage");s(this,"createProjectElement");s(this,"render");s(this,"initProjectsInstancesArray",()=>{const e=this.localStorage.get();if(!e||!e.length)return[];let t=[];for(const o of e){const r=new y({id:o.id,title:o.title,description:o.description,info:o.info});t.push(r)}return t});s(this,"invokeRerender",()=>{const e=this.createProjectElement.createProjectsElementsArray(this.projectsInstancesArray);e&&this.render.renderProjectList(e)});s(this,"addNewProject",e=>{const t=new y({id:e.id,title:e.title,description:e.description,info:e.info});this.projectsInstancesArray.push(t),this.localStorage.add(e);const o=this.createProjectElement.createProjectElement(t);this.render.renderProject(o)});s(this,"removeProjectById",e=>{const t=this.projectsInstancesArray.findIndex(o=>o.id===e);this.projectsInstancesArray.splice(t,1),this.localStorage.set(this.projectsInstancesArray),this.render.unrenderProjectById(e)});s(this,"getProjectById",e=>{const t=this.projectsInstancesArray.find(o=>o.id===e);return t||null});this.status=e,this.localStorage=new A({key:t}),this.projectsInstancesArray=this.initProjectsInstancesArray(),this.createProjectElement=new k({status:e}),this.render=new b({status:e}),this.invokeRerender()}}class N{constructor({appId:e}){s(this,"activeProjectsList");s(this,"finishedProjectsList");s(this,"elements");s(this,"init",()=>{window.addEventListener("load",()=>{var e,t;(e=this.elements.$modalCancelNewProjectButton)==null||e.addEventListener("click",this.closeNewProjectModal),(t=this.elements.$modalNewProjectForm)==null||t.addEventListener("submit",this.newProjectModalSubmitFormHandler)}),document.addEventListener("click",e=>{const t=e.target;t&&(t===this.elements.$addActiveProjectButton&&this.openNewProjectModal("active"),t===this.elements.$addFinishedProjectButton&&this.openNewProjectModal("finished"),t.classList.contains("js-project__action-button")&&this.actionButtonClickHandler(t),t.classList.contains("js-project__more-info-button")&&this.moreInfoClickHandler(t))})});s(this,"initElementsObject",()=>{const e=document.getElementById("active-projects"),t=e==null?void 0:e.querySelector(".projects-list__add-button"),o=document.getElementById("finished-projects"),r=o==null?void 0:o.querySelector(".projects-list__add-button"),n=document.getElementById("modal"),l=n==null?void 0:n.querySelector(".new-project-form"),h=n==null?void 0:n.querySelector("#radio-option-active"),m=n==null?void 0:n.querySelector("#radio-option-finished"),f=l==null?void 0:l.querySelector(".new-project-form__cancel-button"),c=n==null?void 0:n.querySelector(".more-info"),u=c==null?void 0:c.querySelector(".more-info__title"),E=c==null?void 0:c.querySelector(".more-info__description"),w=c==null?void 0:c.querySelector(".more-info__info"),g=c==null?void 0:c.querySelector(".more-info__delete-button"),I=c==null?void 0:c.querySelector(".more-info__close-button");return{$activeProjects:e,$addActiveProjectButton:t,$finishedProjects:o,$addFinishedProjectButton:r,$modal:n,$modalNewProjectForm:l,$modalNewProjectActiveRadio:h,$modalNewProjectFinishedRadio:m,$modalCancelNewProjectButton:f,$modalMoreInfo:c,$modalMoreInfoTitle:u,$modalMoreInfoDescription:E,$modalMoreInfoInfo:w,$modalMoreInfoDeleteButton:g,$modalMoreInfoCloseButton:I}});s(this,"newProjectModalSubmitFormHandler",e=>{e.preventDefault();const t=e.target,o=new FormData(t),r=Object.fromEntries(o),n=r.status,l={id:_(),title:r.title,description:r.description,info:r.info};n==="active"&&this.activeProjectsList.addNewProject(l),n==="finished"&&this.finishedProjectsList.addNewProject(l),this.closeNewProjectModal()});s(this,"actionButtonClickHandler",e=>{try{const t=e.closest(".js-project");if(!t)throw new Error("Project element not found.");const o=t.getAttribute("data-id");if(!o)throw new Error("data-id attribute not found.");const r=t.closest(".projects-list");if(!r)throw new Error("Project list element not found.");const n=r.id;if(!n)throw new Error("Project list id not found.");this.takeActionOnProject(n,o)}catch(t){t instanceof Error&&a.logError(t.message)}});s(this,"moreInfoClickHandler",e=>{var t,o;try{const r=e.closest(".js-project");if(!r)throw new Error("Project element not found.");const n=r.getAttribute("data-id");if(!n)throw new Error("data-id attribute not found.");const l=r.closest(".projects-list");if(!l)throw new Error("Project list element not found.");const h=l.id;if(!h)throw new Error("Project list id not found.");if(h!=="active-projects"&&h!=="finished-projects")throw new Error("Project list id error.");const m=h==="active-projects"?"active":"finished",f=m==="active"?this.activeProjectsList.getProjectById(n):this.finishedProjectsList.getProjectById(n);if(!f)throw new Error(`Project instance for id ${n} not found.`);if(!this.elements.$modalMoreInfo||!this.elements.$modalMoreInfoTitle||!this.elements.$modalMoreInfoDescription||!this.elements.$modalMoreInfoInfo)throw new Error("Modal element not found.");this.elements.$modalMoreInfo.setAttribute("data-id",f.id),this.elements.$modalMoreInfoTitle.innerText=f.title,this.elements.$modalMoreInfoDescription.innerText=f.description,this.elements.$modalMoreInfoInfo.innerText=f.info;const c=()=>this.closeMoreInfoModalButtonClickHandler(c,u),u=()=>this.deleteProjectButtonClickHandler(n,m,c,u);(t=this.elements.$modalMoreInfoCloseButton)==null||t.addEventListener("click",c),(o=this.elements.$modalMoreInfoDeleteButton)==null||o.addEventListener("click",u),this.openMoreInfoModal()}catch(r){r instanceof Error&&a.logError(r.message)}});s(this,"takeActionOnProject",(e,t)=>{try{switch(e){case"active":case"active-projects":const o=this.activeProjectsList.getProjectById(t);if(!o)throw new Error("Project not found.");this.activeProjectsList.removeProjectById(t),this.finishedProjectsList.addNewProject(o);break;case"finished":case"finished-projects":const r=this.finishedProjectsList.getProjectById(t);if(!r)throw new Error("Project not found.");this.finishedProjectsList.removeProjectById(t),this.activeProjectsList.addNewProject(r);break;default:throw new Error("Unable to determine project list status. Check project list id.")}}catch(o){o instanceof Error&&a.logError(o.message)}});s(this,"openNewProjectModal",e=>{console.log(e);try{if(!this.elements.$modal||!this.elements.$modalNewProjectForm||!this.elements.$modalNewProjectActiveRadio||!this.elements.$modalNewProjectFinishedRadio)throw new Error("Modal element not found");e==="active"&&(this.elements.$modalNewProjectActiveRadio.checked=!0),e==="finished"&&(this.elements.$modalNewProjectFinishedRadio.checked=!0),this.elements.$modal.style.display="flex",this.elements.$modalNewProjectForm.style.display="block"}catch(t){t instanceof Error&&a.logError(t.message)}});s(this,"closeNewProjectModal",()=>{try{if(!this.elements.$modal||!this.elements.$modalNewProjectForm)throw new Error("Modal element not found");this.elements.$modal.style.display="none",this.elements.$modalNewProjectForm.style.display="none",this.elements.$modalNewProjectForm.reset()}catch(e){e instanceof Error&&a.logError(e.message)}});s(this,"openMoreInfoModal",()=>{try{if(!this.elements.$modal||!this.elements.$modalMoreInfo)throw new Error("Modal element not found");this.elements.$modal.style.display="flex",this.elements.$modalMoreInfo.style.display="block"}catch(e){e instanceof Error&&a.logError(e.message)}});s(this,"closeMoreInfoModal",()=>{try{if(!this.elements.$modal||!this.elements.$modalMoreInfo)throw new Error("Modal element not found.");this.elements.$modal.style.display="none",this.elements.$modalMoreInfo.style.display="none"}catch(e){e instanceof Error&&a.logError(e.message)}});this.activeProjectsList=new P({status:"active",key:`${e}_ACTIVE_PROJECTS`}),this.finishedProjectsList=new P({status:"finished",key:`${e}_FINISHED_PROJECTS`}),this.elements=this.initElementsObject(),this.init()}closeMoreInfoModalButtonClickHandler(e,t){var o,r;try{this.closeMoreInfoModal(),(o=this.elements.$modalMoreInfoCloseButton)==null||o.removeEventListener("click",e),(r=this.elements.$modalMoreInfoDeleteButton)==null||r.removeEventListener("click",t)}catch(n){n instanceof Error&&a.logError(n.message)}}deleteProjectButtonClickHandler(e,t,o,r){try{switch(t){case"active":this.activeProjectsList.removeProjectById(e);break;case"finished":this.finishedProjectsList.removeProjectById(e);break;default:throw new Error("Status parameter error.")}this.closeMoreInfoModalButtonClickHandler(o,r)}catch(n){n instanceof Error&&a.logError(n.message)}}}new N({appId:"PROJECT_PLANNER"});
