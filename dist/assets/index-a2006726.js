var $=Object.defineProperty;var U=(o,t,e)=>t in o?$(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e;var s=(o,t,e)=>(U(o,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function e(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=e(n);fetch(n.href,i)}})();let g;const R=new Uint8Array(16);function J(){if(!g&&(g=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!g))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return g(R)}const d=[];for(let o=0;o<256;++o)d.push((o+256).toString(16).slice(1));function O(o,t=0){return d[o[t+0]]+d[o[t+1]]+d[o[t+2]]+d[o[t+3]]+"-"+d[o[t+4]]+d[o[t+5]]+"-"+d[o[t+6]]+d[o[t+7]]+"-"+d[o[t+8]]+d[o[t+9]]+"-"+d[o[t+10]]+d[o[t+11]]+d[o[t+12]]+d[o[t+13]]+d[o[t+14]]+d[o[t+15]]}const V=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),_={randomUUID:V};function C(o,t,e){if(_.randomUUID&&!t&&!o)return _.randomUUID();o=o||{};const r=o.random||(o.rng||J)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){e=e||0;for(let n=0;n<16;++n)t[e+n]=r[n];return t}return O(r)}class l{static logError(t){console.error(`Error: ${t}`)}static logInfo(t){console.info(`Info: ${t}`)}}class D{constructor({key:t}){s(this,"key");this.key=t}set(t){try{localStorage.setItem(this.key,JSON.stringify(t))}catch(e){e instanceof Error&&l.logError(e.message)}}get(){try{const t=localStorage.getItem(this.key);return t?JSON.parse(t):null}catch(t){return t instanceof Error&&l.logError(t.message),null}}add(t){try{const e=localStorage.getItem(this.key),r=e?JSON.parse(e):null;if(r)if(Array.isArray(r))r.push(t),localStorage.setItem(this.key,JSON.stringify(r));else throw new Error("Data format is not array. An error could occure while trying to stringify data.");else localStorage.setItem(this.key,JSON.stringify([t]))}catch(e){e instanceof Error&&l.logError(e.message)}}}class S{constructor({id:t,status:e,title:r,description:n,info:i}){s(this,"id");s(this,"status");s(this,"title");s(this,"description");s(this,"info");this.id=t,this.title=r,this.status=e,this.description=n,this.info=i}}class F{constructor({status:t}){s(this,"$projectsList");s(this,"initProjectListElement",t=>{const e=document.getElementById("active-projects"),r=document.getElementById("finished-projects");switch(t){case"active":return e==null?void 0:e.querySelector(".projects-list__content");case"finished":return r==null?void 0:r.querySelector(".projects-list__content");default:return null}});s(this,"renderProject",t=>{try{if(!this.$projectsList)throw new Error("Project list element not provided.");if(!t)throw new Error("Project element not provided.");this.$projectsList.append(t),this.$projectsList.scrollTo(0,this.$projectsList.scrollHeight)}catch(e){e instanceof Error&&l.logError(e.message)}});s(this,"renderProjectList",t=>{try{if(!this.$projectsList)throw new Error("Project list element not provided.");for(const e of t)this.renderProject(e);this.$projectsList.scrollTo(0,0)}catch(e){e instanceof Error&&l.logError(e.message)}});s(this,"unrenderProjectById",t=>{var e;try{((e=this.$projectsList)==null?void 0:e.querySelector(`[data-id="${t}"]`)).remove()}catch(r){r instanceof Error&&l.logError(r.message)}});this.$projectsList=this.initProjectListElement(t)}}class N{constructor(){s(this,"createProjectElement",t=>{const e=t.status==="active"?"Finish":"Activate",r=this.createLi("js-project",t.id),n=this.createH2("js-project__title",void 0,t.title),i=this.createP("js-project__description",void 0,t.description),a=this.createDiv("js-project__buttons-container",void 0,void 0),y=this.createButton(["js-project__more-info-button","outlined-red-button"],void 0,"More Info",void 0),q=this.createButton(["js-project__action-button","filled-red-button"],void 0,e,void 0);return a.append(y,q),r.append(n,i,a),r});s(this,"createProjectsElementsArray",t=>{if(t.length){let e=[];for(const r of t){const n=this.createProjectElement(r);e.push(n)}return e}return null});s(this,"createH2",(t,e,r)=>{const n=document.createElement("h2");return t&&this.addToClassNameList(t,n),e&&(n.id=e),r&&(n.innerText=r),n});s(this,"createP",(t,e,r)=>{const n=document.createElement("p");return t&&this.addToClassNameList(t,n),e&&(n.id=e),r&&(n.innerText=r),n});s(this,"createDiv",(t,e,r)=>{const n=document.createElement("div");return t&&this.addToClassNameList(t,n),e&&(n.id=e),r&&(n.innerText=r),n});s(this,"createButton",(t,e,r,n)=>{const i=document.createElement("button");return t&&this.addToClassNameList(t,i),e&&(i.id=e),n&&r?i.innerHTML=`${r} ${n}`:(r&&(i.innerHTML=r),n&&(i.innerHTML=n)),i});s(this,"addToClassNameList",(t,e)=>{if(typeof t=="string"&&e.classList.add(t),Array.isArray(t))for(const r of t)e.classList.add(r)})}createLi(t,e){const r=document.createElement("li");return t&&this.addToClassNameList(t,r),e&&r.setAttribute("data-id",e),r}}class k{constructor({status:t,projectsFromLocalStorage:e}){s(this,"status");s(this,"createProjectElement");s(this,"render");s(this,"projectsInstancesArray");s(this,"initProjectsInstancesArray",t=>{if(t&&t.length){const e=t.filter(r=>r.status===this.status);if(e.length){let r=[];for(const n of e){const i=new S({id:n.id,status:n.status,title:n.title,description:n.description,info:n.info});r.push(i)}return r}return[]}return[]});s(this,"invokeRerender",()=>{const t=this.createProjectElement.createProjectsElementsArray(this.projectsInstancesArray);t&&this.render.renderProjectList(t)});s(this,"addNewProject",t=>{const e=new S({id:t.id,status:t.status,title:t.title,description:t.description,info:t.info});this.projectsInstancesArray.push(e);const r=this.createProjectElement.createProjectElement(e);this.render.renderProject(r)});s(this,"removeProjectById",t=>{const e=this.projectsInstancesArray.findIndex(r=>r.id===t);this.projectsInstancesArray.splice(e,1),this.render.unrenderProjectById(t)});s(this,"getProjectById",t=>{const e=this.projectsInstancesArray.find(r=>r.id===t);return e||null});this.status=t,this.projectsInstancesArray=this.initProjectsInstancesArray(e),this.createProjectElement=new N,this.render=new F({status:t}),this.invokeRerender()}}const K="PROJECTS",p=new D({key:K}),B=p.get(),E=new k({status:"active",projectsFromLocalStorage:B}),v=new k({status:"finished",projectsFromLocalStorage:B}),L=document.getElementById("active-projects"),z=L==null?void 0:L.querySelector(".projects-list__add-button"),w=document.getElementById("finished-projects"),G=w==null?void 0:w.querySelector(".projects-list__add-button"),u=document.getElementById("new-project-modal"),h=u==null?void 0:u.querySelector(".new-project-modal__cancel-button"),f=u==null?void 0:u.querySelector(".new-project-modal__form"),c=document.getElementById("more-info-modal"),b=c==null?void 0:c.querySelector(".more-info-modal__title"),I=c==null?void 0:c.querySelector(".more-info-modal__description"),A=c==null?void 0:c.querySelector(".more-info-modal__info"),m=c==null?void 0:c.querySelector(".more-info-modal__delete-button"),j=c==null?void 0:c.querySelector(".more-info-modal__close-button"),Q=o=>{switch(o.status){case"active":p.add(o),E.addNewProject(o);break;case"finished":p.add(o),v.addNewProject(o);break;default:l.logError("Status argument error.")}},T=(o,t)=>{o==="active"&&E.removeProjectById(t),o==="finished"&&v.removeProjectById(t)},W=o=>{o.status==="active"&&E.addNewProject(o),o.status==="finished"&&v.addNewProject(o)},X=()=>{try{if(!u)throw new Error("new-project-modal element not found");h==null||h.addEventListener("click",P),f==null||f.addEventListener("submit",H),u.style.display="flex"}catch(o){o instanceof Error&&l.logError(o.message)}},P=()=>{try{if(!u)throw new Error("new-project-modal element not found");u.style.display="none",h==null||h.removeEventListener("click",P),f==null||f.removeEventListener("submit",H),f==null||f.reset()}catch(o){o instanceof Error&&l.logError(o.message)}},H=o=>{o.preventDefault();const t=o.target,e=new FormData(t),r=Object.fromEntries(e),n={id:C(),status:r.status,title:r.title,description:r.description,info:r.info};Q(n),P()},Y=o=>{try{const t=o.closest(".js-project");if(!t)throw new Error("Project element not found.");const e=t.getAttribute("data-id");if(!e)throw new Error("data-id attribute not found.");const r=p.get();if(!r)throw new Error("Projects not found in localstorage.");const n=r.findIndex(a=>a.id===e);if(n===-1)throw new Error(`Project with id ${e} not found in localstorage.`);const[i]=r.splice(n,1);i.status=i.status==="active"?"finished":"active",r.push(i),p.set(r),T(i.status==="active"?"finished":"active",e),W(i)}catch(t){t instanceof Error&&l.logError(t.message)}},Z=o=>{try{const t=o.closest(".js-project");if(!t)throw new Error("Project element not found.");const e=t.getAttribute("data-id");if(!e)throw new Error("data-id attribute not found.");const r=t.closest(".projects-list"),n=(r==null?void 0:r.id)==="active-projects"?"active":"finished",i=n==="active"?E.getProjectById(e):v.getProjectById(e);if(!i)throw new Error(`Project instance for id ${e} not found.`);if(!c||!b||!I||!A)throw new Error("Modal element not found.");c.setAttribute("data-id",i.id),b.innerText=i.title,I.innerText=i.description,A.innerText=i.info;const a=()=>x(a,y),y=()=>M(e,n,a,y);j==null||j.addEventListener("click",a),m==null||m.addEventListener("click",y),c.style.display="flex"}catch(t){t instanceof Error&&l.logError(t.message)}};function x(o,t){try{if(!c)throw new Error("more-info-modal element not found.");c.style.display="none",j==null||j.removeEventListener("click",o),m==null||m.removeEventListener("click",t)}catch(e){e instanceof Error&&l.logError(e.message)}}function M(o,t,e,r){try{const n=p.get();if(!n)throw new Error("Projects not found in localstorage.");const i=n.filter(a=>a.id!==o);p.set(i),T(t,o),x(e,r)}catch(n){n instanceof Error&&l.logError(n.message)}}document.addEventListener("click",o=>{const t=o.target;t&&((t===z||t===G)&&X(),t.classList.contains("js-project__action-button")&&Y(t),t.classList.contains("js-project__more-info-button")&&Z(t))});
